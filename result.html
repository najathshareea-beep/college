<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Result | DARUNNAJATH COLLEGE</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:linear-gradient(135deg,#0b5ed7,#74b9ff);font-family:'Poppins',sans-serif;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
    .card{max-width:400px;width:100%;background:#fff;border-radius:18px;box-shadow:0 15px 40px rgba(0,0,0,.3);overflow:hidden}
    .header{background:linear-gradient(135deg,#0b5ed7,#409cff);color:#fff;padding:30px 20px;text-align:center}
    .logo{width:85px;height:85px;border-radius:50%;border:5px solid rgba(255,255,255,.5);object-fit:contain;margin-bottom:12px}
    h2{font-size:1.5rem;font-weight:700;margin:10px 0 5px}
    p{font-size:15px;opacity:0.95}
    .body{padding:35px 30px}
    input{width:100%;padding:15px 18px;margin-bottom:20px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;transition:.3s}
    input:focus{border-color:#0b5ed7;outline:none;box-shadow:0 0 0 4px rgba(11,94,215,.15)}
    button{background:#0b5ed7;color:#fff;border:none;padding:16px;border-radius:12px;width:100%;font-weight:600;font-size:16px;cursor:pointer;transition:.3s}
    button:hover{background:#0950b8;transform:translateY(-2px)}
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <img src="https://i.postimg.cc/rmS5jXXX/COLLEGE-LOGO.png" class="logo" alt="Logo">
      <h2>DARUNNAJATH COLLEGE</h2>
      <p>Official Result Portal â€¢ 2025-26</p>
    </div>
    <div class="body">
      <form id="f">
        <input type="text" name="roll" placeholder="Registration Number" required>
        <input type="date" name="dob" required>
        <button type="submit">View Result</button>
      </form>
    </div>
  </div>

<script>
const URL = 'https://script.google.com/macros/s/AKfycbwfnCkY-HtE84fMOEH3UTGTVPKQsdN6Uo75xn3w2RKBj2DoxPFqTQ0Gcz8nlCg-XeU/exec';
document.getElementById('f').onsubmit=e=>{
  e.preventDefault();
  const win=window.open('','_blank');
  win.document.write('<body style="font-family:Poppins;background:#f0f4ff;display:flex;align-items:center;justify-content:center;height:100vh;margin:0"><div style="text-align:center;color:#0b5ed7"><h3>Fetching Result...</h3><p>Please wait</p></div></body>');
  
  const u = e.target.roll.value.trim();
  const d = e.target.dob.value;
  
  fetch(`${URL}?roll=${u}&dob=${d}`)
    .then(r=>r.text())
    .then(html=>{
      win.document.open();
      if(html.includes('grade')||html.includes('PASSED')||html.includes('FAILED')||html.includes('Result')){
        win.document.write(html);
      }else{
        win.document.write(`<body style="font-family:Poppins;background:#f0f4ff;display:flex;align-items:center;justify-content:center;height:100vh;padding:20px">
          <div style="background:#fff;padding:40px;border-radius:18px;box-shadow:0 15px 40px rgba(0,0, 0,.3);text-align:center;max-width:380px">
            <h3 style="color:#dc3545;margin-bottom:15px">Result Not Found</h3>
            <p>Please check Registration Number & Date of Birth</p>
            <button onclick="window.close()" style="margin-top:20px;background:#0b5ed7;color:#fff;border:none;padding:12px 30px;border-radius:12px;cursor:pointer">Close</button>
          </div>
        </body>`);
      }
      win.document.close();
    })
    .catch(()=>{
      win.document.write('<body style="font-family:Poppins;background:#f0f4ff;display:flex;align-items:center;justify-content:center;height:100vh"><h3 style="color:#dc3545">Connection Failed<br>Please try again</h3></body>');
    });
};
</script>
</body>
</html>
